import{j as e,r as b,u as P}from"./index-Dk3oI7Kw.js";import{u as F}from"./useUsers--wD3l_uY.js";import{U as k,C as q}from"./User-B_vQGkby.js";import{U as z}from"./UserPlus-D0ii0ult.js";const v=({className:x})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:x,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),e.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),h=({label:x,name:s,value:a,onChange:t,error:l,type:r="text",required:p=!1,placeholder:n,disabled:u=!1})=>{const g=`field-${s}`,f=`error-${s}`;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{htmlFor:g,className:"block text-sm text-slate-200 font-semibold",children:[x,!p&&e.jsx("span",{className:"ml-1 text-slate-400 font-normal",children:"(optional)"})]}),e.jsx("input",{id:g,type:r,value:a,onChange:o=>t(s,o.target.value),placeholder:n,disabled:u,"aria-invalid":l?"true":"false","aria-describedby":l?f:void 0,className:`w-full px-3 py-2 bg-white/5 backdrop-blur-sm border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-white placeholder-slate-400
          ${l?"border-red-500/60 bg-red-900/10":"border-white/10 hover:border-white/20"}
          ${u?"bg-slate-800/50 cursor-not-allowed opacity-50":""}`}),l&&e.jsxs("p",{id:f,className:"mt-1 flex items-center gap-1 text-sm text-red-400 font-medium",role:"alert",children:[e.jsx(v,{className:"size-4"}),l]})]})};class S{static validateEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}static validatePhone(s){return/^[\+]?[1-9][\d]{0,15}$/.test(s.replace(/[\s\-\(\)]/g,""))}static validateUrl(s){if(!s)return!0;try{return new URL(s.startsWith("http")?s:`https://${s}`),!0}catch{return!1}}static validateRequired(s){return s.trim().length>0}static validateForm(s){const a={};return this.validateRequired(s.name)||(a.name="Full name is required"),this.validateRequired(s.username)?s.username.length<3&&(a.username="Username must be at least 3 characters"):a.username="Username is required",this.validateRequired(s.email)?this.validateEmail(s.email)||(a.email="Please enter a valid email address"):a.email="Email is required",this.validateRequired(s.address.city)||(a["address.city"]="City is required"),this.validateRequired(s.company.name)||(a["company.name"]="Company name is required"),s.phone&&!this.validatePhone(s.phone)&&(a.phone="Please enter a valid phone number"),s.website&&!this.validateUrl(s.website)&&(a.website="Please enter a valid website URL"),a}}const E=({onSubmit:x,onCancel:s,isSubmitting:a=!1})=>{const[t,l]=b.useState({name:"",username:"",email:"",phone:"",website:"",address:{street:"",suite:"",city:"",zipcode:""},company:{name:"",catchPhrase:""}}),[r,p]=b.useState({}),[n,u]=b.useState({}),[g,f]=b.useState(!1),o=(d,c)=>{if(d.includes(".")){const[m,j]=d.split(".");m==="address"?l(i=>({...i,address:{...i.address,[j]:c}})):m==="company"&&l(i=>({...i,company:{...i.company,[j]:c}}))}else l(m=>({...m,[d]:c}));r[d]&&p(m=>({...m,[d]:""})),u(m=>({...m,[d]:!0}))},N=async d=>{d.preventDefault(),f(!0);const c=S.validateForm(t);p(c);const j=["name","username","email","phone","website","address.street","address.suite","address.city","address.zipcode","company.name","company.catchPhrase"].reduce((i,y)=>({...i,[y]:!0}),{});if(u(j),f(!1),Object.keys(c).length===0)x(t);else{const i=Object.keys(c)[0];document.getElementById(`field-${i}`)?.focus()}},C=()=>{l({name:"",username:"",email:"",phone:"",website:"",address:{street:"",suite:"",city:"",zipcode:""},company:{name:"",catchPhrase:""}}),p({}),u({})},U=Object.keys(r).length>0,w=b.useMemo(()=>{const c=["name","username","email","phone","website"].some(i=>{const y=t[i];return typeof y=="string"&&y.trim().length>0}),m=Object.values(t.address).some(i=>typeof i=="string"&&i.trim().length>0),j=Object.values(t.company).some(i=>typeof i=="string"&&i.trim().length>0);return c||m||j},[t]);return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"mb-6 bg-white/5 backdrop-blur-xl border border-white/10 rounded-lg shadow-xl",children:[e.jsx("section",{className:"px-6 py-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-600 to-cyan-500 rounded-lg shadow-lg shadow-indigo-500/25",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 to-cyan-400 bg-clip-text text-transparent",children:"Add New User"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Create a new user profile with complete information"})]})]}),w&&e.jsxs("div",{className:"flex items-center text-amber-400 text-sm",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"Unsaved changes"]})]})}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"size-2 bg-indigo-500 rounded-full"}),"Personal Information"]}),e.jsxs("fieldset",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"Full Name",name:"name",value:t.name,onChange:o,error:n.name?r.name:void 0,required:!0,placeholder:"e.g., John Doe"}),e.jsx(h,{label:"Username",name:"username",value:t.username,onChange:o,error:n.username?r.username:void 0,required:!0,placeholder:"e.g., johndoe"})]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"size-2 bg-cyan-400 rounded-full"}),"Contact Information"]}),e.jsxs("fieldset",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"Email Address",name:"email",type:"email",value:t.email,onChange:o,error:n.email?r.email:void 0,required:!0,placeholder:"e.g., john@example.com"}),e.jsx(h,{label:"Phone Number",name:"phone",type:"tel",value:t.phone,onChange:o,error:n.phone?r.phone:void 0,placeholder:"e.g., +1 (555) 123-4567"})]}),e.jsx("fieldset",{className:"mt-6",children:e.jsx(h,{label:"Website",name:"website",type:"url",value:t.website,onChange:o,error:n.website?r.website:void 0,placeholder:"e.g., www.johndoe.com"})})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"size-2 bg-indigo-400 rounded-full"}),"Address Information"]}),e.jsxs("fieldset",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"Street Address",name:"address.street",value:t.address.street,onChange:o,error:n["address.street"]?r["address.street"]:void 0,placeholder:"e.g., 123 Main Street"}),e.jsx(h,{label:"Suite/Unit",name:"address.suite",value:t.address.suite,onChange:o,error:n["address.suite"]?r["address.suite"]:void 0,placeholder:"e.g., Apt 4B, Suite 200"}),e.jsx(h,{label:"City",name:"address.city",value:t.address.city,onChange:o,error:n["address.city"]?r["address.city"]:void 0,required:!0,placeholder:"e.g., New York"}),e.jsx(h,{label:"ZIP Code",name:"address.zipcode",value:t.address.zipcode,onChange:o,error:n["address.zipcode"]?r["address.zipcode"]:void 0,placeholder:"e.g., 10001"})]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"size-2 bg-cyan-200 rounded-full"}),"Company Information"]}),e.jsxs("fieldset",{className:"space-y-6",children:[e.jsx(h,{label:"Company Name",name:"company.name",value:t.company.name,onChange:o,error:n["company.name"]?r["company.name"]:void 0,required:!0,placeholder:"e.g., Acme Corporation"}),e.jsx(h,{label:"Company Slogan",name:"company.catchPhrase",value:t.company.catchPhrase,onChange:o,error:n["company.catchPhrase"]?r["company.catchPhrase"]:void 0,placeholder:"e.g., Innovation at its finest"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-white/10",children:[e.jsx("button",{type:"submit",disabled:a||g,className:"px-6 py-3 flex-1 sm:flex-none inline-flex justify-center items-center gap-2 bg-gradient-to-r from-indigo-600 to-cyan-500 hover:from-indigo-700 hover:to-cyan-600 rounded-lg text-white font-medium focus:ring-2 focus:ring-indigo-500/30 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin size-5 border-b-2 border-white rounded-full"}),"Creating User..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"size-4"}),"Create User"]})}),e.jsxs("button",{type:"button",onClick:C,disabled:a||!w,className:"px-4 py-3 inline-flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 rounded-lg text-slate-300 font-medium focus:ring-2 focus:ring-slate-500/30 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsx(q,{className:"size-4"}),"Reset"]}),e.jsx("button",{type:"button",onClick:s,disabled:a,className:"px-4 py-3 inline-flex items-center justify-center hover:bg-white/5 border border-white/20 rounded-lg text-slate-300 font-medium focus:ring-2 focus:ring-slate-500/30 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Cancel"})]}),U&&Object.keys(n).length>0&&e.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(v,{className:"size-5 mt-0.5 mr-3 flex-shrink-0 text-red-400"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-sm text-red-300 font-medium",children:"Please fix the following errors:"}),e.jsx("ul",{className:"text-red-400 text-sm space-y-1",children:Object.entries(r).map(([d,c])=>e.jsxs("li",{children:["• ",c]},d))})]})]})})]})]})})},O=()=>{const x=P(),{addUser:s}=F(),[a,t]=b.useState(!1),[l,r]=b.useState(null),p=async u=>{t(!0),r(null);try{await new Promise(f=>setTimeout(f,1e3));const g={...u,address:{...u.address,geo:{lat:"0",lng:"0"}},company:{...u.company,bs:"business services"}};s(g),x("/")}catch(g){r(g instanceof Error?g.message:"Failed to add user")}finally{t(!1)}},n=()=>{x("/")};return e.jsxs("section",{children:[l&&e.jsxs("div",{className:"mb-4 bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-red-300 backdrop-blur-sm",children:[e.jsx("strong",{children:"Error:"})," ",l]}),e.jsx(E,{onSubmit:p,onCancel:n,isSubmitting:a})]})};export{O as default};
